<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8">
    <title>Polymaps - Affine Transform</title>
    <script type="text/javascript" src="{{url_for('static', filename='js/jquery-2.1.0.min.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static', filename='js/polymaps.min.js')}}"></script>
    <style type="text/css"m>
    </style>
</head>
<body>
    <div id="map">
    </div>
    <script type="text/javascript">
        var po = null;
        var servers = null;
        var svg = null;
        var map = null;
        $(function () {
            po = org.polymaps;
            servers = {{ servers|tojson|safe }};
            svg = po.svg("svg");
            svg.setAttribute("width", $(window).width());
            svg.setAttribute("height", $(window).height());
            document.getElementById("map").appendChild(svg);
            map = po.map()
                //.container(document.getElementById("map").appendChild(po.svg("svg")))
                .container(svg)
                .zoomRange([1, 32])
                .zoom(8)
                .center({lon: -177, lat: 84})
                .size({'x': $(window).width(), 'y': $(window).height()})
                //.zoom(1)
                .add(po.interact());
            //
                map.add(po.image()
                    .url(po.url("http://{S}/{Z}/{X}/{Y}").repeat(false).hosts({{servers|tojson|safe}}))
                    //.zoom(function(z) {return Math.max(8, z);})
                    );
         });
    </script>
</body>
</html>
